{
    "rules": {
        "blueprints": {
            ".read": "true",
            "$blueprint": {
                ".write": "!data.exists() || (data.child('authorId').val() === auth.uid || data.child('author').child('userId').val() === auth.uid) && newData.exists() || root.child('moderators').child(auth.uid).val() === true",
                ".validate": "newData.hasChildren(['author']) || newData.hasChildren(['authorId'])",
                "author": {
                    ".validate": "newData.child('userId').isString()",
                    "userId": {
                        ".validate": "newData.val() === auth.uid"
                    }
                },
                "favorites": {
                    "$uid": {
                        ".write": "auth != null && auth.uid == $uid"
                    }
                },
                "numberOfFavorites": {
                    ".write": "auth != null"
                }
            }
        },
        "users": {
            "$uid": {
                ".read": "auth != null && auth.uid == $uid",
                ".write": "auth != null && auth.uid == $uid",
                "displayName": {
                    ".read": "true"
                },
                "description": {
                    ".read": "true"
                }
            }
        },
        "moderators": {
            ".read": "true"
        }
    }
}